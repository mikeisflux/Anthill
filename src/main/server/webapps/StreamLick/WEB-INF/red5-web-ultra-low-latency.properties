# StreamLick Ultra-Low Latency Configuration
# Apply these settings for sub-500ms WebRTC latency
# Copy this file to red5-web.properties to enable

webapp.contextPath=/StreamLick
webapp.virtualHosts=*

# Database Configuration
db.app.name=StreamLick
db.name=streamlick
db.type=mapdb
db.host=localhost
db.user=
db.password=

# ============================================
# ULTRA-LOW LATENCY WEBRTC SETTINGS
# ============================================

# WebRTC Core Settings
settings.webRTCEnabled=true
settings.webRTCFrameRate=30
settings.webRTCPortRangeMin=5000
settings.webRTCPortRangeMax=65000

# CRITICAL: Disable adaptive bitrate for lowest latency
settings.adaptiveResolutionEnabled=false

# Keyframe interval (GOP size) - 1 second for quick seeking
settings.gopSize=30

# Buffering - DISABLED for ultra-low latency
settings.rtmpIngestBufferTimeMs=0

# ICE/DTLS Timeouts - Aggressive for fast connection
settings.iceConnectionTimeoutMs=5000
settings.dtlsTimeoutMs=5000

# ============================================
# HLS SETTINGS (Low-latency mode)
# ============================================
settings.hlsMuxingEnabled=true
settings.hlsListSize=3
settings.hlsTime=1
settings.hlsPlayListType=event
settings.deleteHLSFilesOnEnded=true

# ============================================
# DASH SETTINGS (Ultra-Low Latency CMAF)
# ============================================
settings.dashMuxingEnabled=true
settings.dashSegDuration=1
settings.dashFragmentDuration=0.5
settings.targetLatency=0.5
settings.dashWindowSize=3
settings.dashExtraWindowSize=2

# ============================================
# RTMP OUTPUT SETTINGS
# ============================================
settings.rtmpMuxingEnabled=true
settings.endpointRepublishLimit=3
settings.endpointHealthCheckPeriodMs=2000

# ============================================
# RECORDING SETTINGS (Minimal impact on latency)
# ============================================
settings.mp4MuxingEnabled=false
settings.generatePreview=false
settings.writeStatsToDatastore=true

# ============================================
# TOKEN SECURITY
# ============================================
settings.tokenControlEnabled=true
settings.publishTokenControlEnabled=true
settings.playTokenControlEnabled=false

# ============================================
# STREAM SETTINGS
# ============================================
settings.acceptOnlyStreamsInDataStore=false
settings.objectDetectionEnabled=false
settings.createPreviewPeriod=0

# ============================================
# ICE/STUN/TURN CONFIGURATION
# ============================================
settings.stunServerURI=stun:stun.l.google.com:19302
# Add additional STUN servers for redundancy
# settings.stunServerURI=stun:stun1.l.google.com:19302,stun:stun2.l.google.com:19302

# TURN server (configure if NAT traversal issues)
settings.turnServerUsername=
settings.turnServerCredential=

# ============================================
# WEBHOOK CONFIGURATION
# ============================================
settings.listenerHookURL=
settings.vodFinishedHookURL=
